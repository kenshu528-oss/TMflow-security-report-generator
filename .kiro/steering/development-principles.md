---
inclusion: always
---

# 開發原則

## 核心原則

### 1. 穩定性優先
- 基於已知可用的版本進行開發
- 避免大幅度重構，採用漸進式改進
- 每次修改都要有明確的測試驗證

### 2. 模組化設計
- 功能模組獨立，職責明確
- 模組間低耦合，高內聚
- 每個模組都可以獨立測試

### 3. 務實方案
- 優先保證功能正常運作
- 接受合理的技術妥協
- 避免過度優化導致的複雜性

### 4. 疊加開發模式 - 修正版
- **功能疊加**: 新功能以疊加方式開發，**絕不修改現有模組的架構**
- **模組獨立**: 每個模組保持獨立性，避免相互影響
- **向後相容**: 新版本必須與舊配置和功能相容
- **漸進增強**: 透過新增模組來擴展功能，而非修改現有模組
- **⚠️ 重要教訓**: 疊加 ≠ 重建，絕不破壞穩定的 UI 架構

## 代碼風格

### Python 代碼規範
- 使用 UTF-8 編碼
- 函數和變數使用 snake_case
- 類別使用 PascalCase
- 常數使用 UPPER_CASE

### 錯誤處理
- 使用 try-except 包裝可能失敗的操作
- 提供有意義的錯誤訊息
- 記錄錯誤到日誌系統

### 日誌記錄
- 使用統一的日誌格式：`[時間戳] 訊息`
- 重要操作都要記錄日誌
- 使用適當的日誌級別（✅ 成功、❌ 錯誤、⚠️ 警告、💡 提示）

## 架構原則

### UI 設計
- 使用深色主題保持一致性
- 左右分割佈局：功能區域 | 狀態和日誌
- 提供即時的視覺回饋

### 報告生成
- 使用最簡單可靠的 subprocess 方式
- 避免複雜的進程管理和視窗隱藏
- 確保報告檔名包含時間戳記

### 配置管理
- 敏感信息放在 config.txt 中
- 提供 config.example.txt 作為範本
- 支援配置的自動載入和儲存

## 相容性要求

### Python 版本
- 支援 Python 3.11+
- 使用標準庫優先，減少外部依賴

### 作業系統
- 主要支援 Windows
- 考慮跨平台相容性

### 執行檔打包
- 使用 PyInstaller 進行打包
- 最小化依賴，優化檔案大小
- 確保執行檔和 Python 腳本行為一致