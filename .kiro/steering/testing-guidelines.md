---
inclusion: always
---

# 測試指導原則

## 測試策略

### 分層測試
1. **模組測試** - 獨立測試每個功能模組
2. **整合測試** - 測試模組間的協作
3. **UI 測試** - 測試使用者介面功能
4. **端到端測試** - 完整的工作流程測試

### 測試優先級
- **核心功能**: API 連接、報告生成 (必須測試)
- **UI 功能**: 介面操作、狀態顯示 (重要測試)
- **配置管理**: 載入、儲存配置 (建議測試)
- **錯誤處理**: 異常情況處理 (建議測試)

## 測試工具和方法

### 自動化測試
- 使用 `test_modules.py` 進行模組化測試
- 每個模組都要有對應的測試函數
- 測試結果要有清楚的成功/失敗指示

### 手動測試
- UI 功能測試：按鈕點擊、輸入驗證
- 工作流程測試：完整的報告生成流程
- 跨平台測試：不同作業系統的相容性

### 測試環境
- **開發環境**: Python 腳本直接執行
- **生產環境**: 執行檔測試
- **網路環境**: API 連接測試

## 測試檢查清單

### API 模組測試
- [ ] API 連接測試
- [ ] 憑證驗證測試
- [ ] 專案資料獲取測試
- [ ] 錯誤處理測試

### 報告生成模組測試
- [ ] 單一報告生成測試
- [ ] 批量報告生成測試
- [ ] 檔案命名格式驗證
- [ ] 輸出路徑處理測試

### 配置管理模組測試
- [ ] 配置檔案載入測試
- [ ] 配置檔案儲存測試
- [ ] 預設值處理測試
- [ ] 錯誤配置處理測試

### UI 整合測試
- [ ] 介面初始化測試
- [ ] 模組整合測試
- [ ] 狀態同步測試
- [ ] 錯誤顯示測試

## 測試執行流程

### 開發階段測試
1. 修改程式碼後立即執行相關模組測試
2. 確保所有測試通過後再進行整合
3. 記錄測試結果和發現的問題

### 發布前測試
1. 執行完整的模組測試套件
2. 進行手動 UI 功能測試
3. 測試執行檔的功能完整性
4. 驗證配置檔案的相容性

### 測試結果處理
- **全部通過**: 可以進行發布
- **部分失敗**: 修復問題後重新測試
- **大量失敗**: 考慮回滾到穩定版本

## 測試最佳實踐

### 測試設計原則
- 測試要獨立，不依賴其他測試的結果
- 測試要可重複執行
- 測試要有明確的預期結果

### 測試資料管理
- 使用已知的測試資料（如 TMflow 2.26.1200）
- 避免使用會變動的即時資料
- 清理測試產生的臨時檔案

### 錯誤處理測試
- 測試網路連接失敗的情況
- 測試無效 API 憑證的處理
- 測試檔案系統錯誤的處理
- 測試使用者輸入錯誤的處理

## 測試報告

### 測試結果記錄
- 記錄測試執行時間
- 記錄成功和失敗的測試項目
- 記錄發現的問題和解決方案

### 測試覆蓋率
- 確保所有核心功能都有測試覆蓋
- 重點關注容易出錯的模組
- 定期檢視和更新測試案例