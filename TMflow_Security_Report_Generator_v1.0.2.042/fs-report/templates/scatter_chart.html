{% extends "base.html" %}

{% block content %}
<div class="chart-container">
    <h2>Correlation Analysis</h2>
    <div class="chart-wrapper">
        <canvas id="scatterChart"></canvas>
    </div>
</div>

<div class="table-container">
    <h2>Data Table</h2>
    <table>
        <thead>
            <tr>
                {% for header in table_data.headers %}
                <th>{{ header }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in table_data.rows %}
            <tr>
                {% for cell in row %}
                <td>{{ cell }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('scatterChart').getContext('2d');
    const chartData = {{ chart_data.main | safe }};
    
    new Chart(ctx, {
        type: 'scatter',
        data: chartData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: '{{ slide_title }}',
                    font: {
                        size: 16
                    }
                },
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Y Axis'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'X Axis'
                    }
                }
            }
        }
    });
});
</script>
{% endblock %} 